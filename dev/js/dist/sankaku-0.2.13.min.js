/*
 inazumatv.com
 @author (at)taikiken / http://inazumatv.com
 @date 2014/06/20 - 11:55

 Copyright (c) 2011-2014 inazumatv.com, inc.

 Distributed under the terms of the MIT license.
 http://www.opensource.org/licenses/mit-license.html

 This notice shall be included in all copies or substantial portions of the Software.

 delaunay
 original: https://github.com/ironwallaby/delaunay

 canvas-toBlob.js
 A canvas.toBlob() implementation.
 2011-07-13

 By Eli Grey, http://eligrey.com and Devin Samarin, https://github.com/eboyjr
 License: X11/MIT
   See LICENSE.md
 @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js

 FileSaver.js
 A saveAs() FileSaver implementation.
 2014-05-27

 By Eli Grey, http://eligrey.com
 License: X11/MIT
   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md
 @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js

 hosted on
 https://github.com/taikiken/sankaku.js
 inazumatv.com
 @author (at)taikiken / http://inazumatv.com
 @date 2014/07/20 - 20:31

 Copyright (c) 2011-2014 inazumatv.com, inc.

 Distributed under the terms of the MIT license.
 http://www.opensource.org/licenses/mit-license.html

 This notice shall be included in all copies or substantial portions of the Software.
*/
var Sankaku={version:"0.2.12"};
(function(k){k.console||(k.console={info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){},table:function(){}});Date.now||(Date.now=function(){return(new Date).getTime()});(function(){for(var d=0,h=["ms","moz","webkit","o"],g=0;g<h.length&&!k.requestAnimationFrame;++g)k.requestAnimationFrame=k[h[g]+"RequestAnimationFrame"],k.cancelAnimationFrame=k[h[g]+"CancelAnimationFrame"]||k[h[g]+"CancelRequestAnimationFrame"];void 0===k.requestAnimationFrame&&void 0!==k.setTimeout&&
(k.requestAnimationFrame=function(f){var e=Date.now(),c=Math.max(0,16-(e-d)),b=k.setTimeout(function(){f(e+c)},c);d=e+c;return b});void 0===k.cancelAnimationFrame&&void 0!==k.clearTimeout&&(k.cancelAnimationFrame=function(f){k.clearTimeout(f)});Object.create||(Object.create=function(){function f(){}return function(e){if(1!==arguments.length)throw Error("Object.create implementation only accepts one parameter.");f.prototype=e;return new f}}());Array.isArray||(Array.isArray=function(f){return"[object Array]"===
Object.prototype.toString.call(f)});Array.prototype.indexOf||(Array.prototype.indexOf=function(f,e){var c;c=e?e:0;var b;if(!this)throw new TypeError;b=this.length;if(0===b||c>=b)return-1;for(0>c&&(c=b-Math.abs(c));c<b;c++)if(this[c]===f)return c;return-1});Array.prototype.forEach||(Array.prototype.forEach=function(f,e){var c,b;c=0;for(b=this.length;c<b;++c)c in this&&f.call(e,this[c],c,this)});Function.prototype.bind||(Function.prototype.bind=function(f){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
var e=Array.prototype.slice.call(arguments,1),c=this,b=function(){},a=function(){return c.apply(this instanceof b&&f?this:f,e.concat(Array.prototype.slice.call(arguments)))};b.prototype=this.prototype;a.prototype=new b;return a});String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;window.URL=window.URL||window.webkitURL||window.mozURL||
window.msURL})()})(window.self);(function(k){k.Sankaku.extend=function(d,h){h.prototype=Object.create(d.prototype);h.prototype.constructor=h}})(window);
(function(k){var d=k.Uint8Array;k=k.HTMLCanvasElement;var h=/\s*;\s*base64\s*(?:;|$)/i,g;d&&(g=new d([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]));k&&!k.prototype.toBlob&&(k.prototype.toBlob=function(f,e){e||(e="image/png");if(this.mozGetAsFile)f(this.mozGetAsFile("canvas",e));else{var c=Array.prototype.slice.call(arguments,
1),b=this.toDataURL.apply(this,c),a=b.indexOf(","),c=b.substring(a+1),b=h.test(b.substring(0,a)),m;if(Blob.fake)m=new Blob,m.encoding=b?"base64":"URI",m.data=c,m.size=c.length;else if(d)if(b){m=Blob;for(var b=c.length,a=new d(b/4*3|0),q=0,r=0,l=[0,0],w=0,u=0,k,p;b--;)p=c.charCodeAt(q++),k=g[p-43],255!==k&&void 0!==k&&(l[1]=l[0],l[0]=p,u=u<<6|k,w++,4===w&&(a[r++]=u>>>16,61!==l[1]&&(a[r++]=u>>>8),61!==l[0]&&(a[r++]=u),w=0));m=new m([new d(a.buffer)],{type:e})}else m=new Blob([new d(decodeURIComponent(c))],
{type:e});f(m)}})})(self);
(function(k){k.EventDispatcher=function(){function d(){}var h=d.prototype;h.constructor=d;h.addEventListener=function(g,f){"undefined"===typeof this._listeners&&(this._listeners={});var e=this._listeners;"undefined"===typeof e[g]&&(e[g]=[]);-1===e[g].indexOf(f)&&e[g].push(f)};h.hasEventListener=function(g,f){var e=this._listeners;return"undefined"!==typeof e&&"undefined"!==typeof f[g]&&-1!==e[g].indexOf(f)?!0:!1};h.removeEventListener=function(g,f){if("undefined"!==typeof this._listeners){var e=this._listeners[g],
c;"undefined"!==typeof e&&(c=e.indexOf(f),-1!==c&&e.splice(c,1))}};h.dispatchEvent=function(g){var f=this._listeners,e,c;if("undefined"!==typeof f&&"undefined"!==typeof g.type&&(f=f[g.type],"undefined"!==typeof f))for(g.target=this,e=0,c=f.length;e<c;e++)f[e].call(this,g)};d.initialize=function(g){g.addEventListener=h.addEventListener;g.hasEventListener=h.hasEventListener;g.removeEventListener=h.removeEventListener;g.dispatchEvent=h.dispatchEvent};return d}()})(window.Sankaku);
(function(k){var d=k.Sankaku;d.LoadImage=function(){function h(f){this._path=f;this._img=null;this._boundComplete=this.onComplete.bind(this);this._boundError=this.onError.bind(this)}h.COMPLETE="load_image_complete";h.ERROR="load_image_error";var g=h.prototype;g.constructor=h;d.EventDispatcher.initialize(g);g.clone=function(){return new h(this._path)};g.load=function(){var f=new Image;this._img=f;f.addEventListener("load",this._boundComplete,!1);f.addEventListener("error",this._boundError,!1);f.src=
this._path};g.dispose=function(){var f=this._img;f.removeEventListener("load",this._boundComplete);f.removeEventListener("error",this._boundError)};g.onComplete=function(){this.dispose();this.dispatchEvent({type:h.COMPLETE,currentTarget:this,path:this._path,img:this._img})};g.onError=function(){this.dispose();this.dispatchEvent({type:h.ERROR,currentTarget:this,path:this._path})};return h}()})(window);
(function(k){function d(){}var h=k.Sankaku,g=g||"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(f){if("undefined"===typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=f.document,c=e.createElementNS("http://www.w3.org/1999/xhtml","a"),b=!f.externalHost&&"download"in c,a=function(b){var a=e.createEvent("MouseEvents");a.initMouseEvent("click",!0,!1,f,0,0,0,0,0,!1,!1,!1,!1,0,null);b.dispatchEvent(a)},m=f.webkitRequestFileSystem,
q=f.requestFileSystem||m||f.mozRequestFileSystem,g=function(a){(f.setImmediate||f.setTimeout)(function(){throw a;},0)},h=0,w=[],d=function(){for(var a=w.length;a--;){var b=w[a];"string"===typeof b?(f.URL||f.webkitURL||f).revokeObjectURL(b):b.remove()}w.length=0},s=function(a,b,c){b=[].concat(b);for(var m=b.length;m--;){var e=a["on"+b[m]];if("function"===typeof e)try{e.call(a,c||a)}catch(q){g(q)}}},p=function(e,g){var d=this,r=e.type,u=!1,p,n,t=function(){var a=(f.URL||f.webkitURL||f).createObjectURL(e);
w.push(a);return a},A=function(){s(d,["writestart","progress","write","writeend"])},y=function(){if(u||!p)p=t(e);n?n.location.href=p:k.open(p,"_blank");d.readyState=d.DONE;A()},z=function(a){return function(){if(d.readyState!==d.DONE)return a.apply(this,arguments)}},B={create:!0,exclusive:!1},C;d.readyState=d.INIT;g||(g="download");if(b)p=t(e),c.href=p,c.download=g,a(c),d.readyState=d.DONE,A();else{f.chrome&&r&&"application/octet-stream"!==r&&(C=e.slice||e.webkitSlice,e=C.call(e,0,e.size,"application/octet-stream"),
u=!0);m&&"download"!==g&&(g+=".download");if("application/octet-stream"===r||m)n=f;q?(h+=e.size,q(f.TEMPORARY,h,z(function(a){a.root.getDirectory("saved",B,z(function(a){var b=function(){a.getFile(g,B,z(function(a){a.createWriter(z(function(b){b.onwriteend=function(b){n.location.href=a.toURL();w.push(a);d.readyState=d.DONE;s(d,"writeend",b)};b.onerror=function(){var a=b.error;a.code!==a.ABORT_ERR&&y()};["writestart","progress","write","abort"].forEach(function(a){b["on"+a]=d["on"+a]});b.write(e);
d.abort=function(){b.abort();d.readyState=d.DONE};d.readyState=d.WRITING}),y)}),y)};a.getFile(g,{create:!1},z(function(a){a.remove();b()}),z(function(a){a.code===a.NOT_FOUND_ERR?b():y()}))}),y)}),y)):y()}},n=p.prototype,t=function(a,b){return new p(a,b)};n.abort=function(){this.readyState=this.DONE;s(this,"abort")};n.readyState=n.INIT=0;n.WRITING=1;n.DONE=2;n.error=n.onwritestart=n.onprogress=n.onwrite=n.onabort=n.onerror=n.onwriteend=null;f.addEventListener("unload",d,!1);t.unload=function(){d();
f.removeEventListener("unload",d,!1)};return t}}("undefined"!==typeof self&&self||"undefined"!==typeof k&&k||this.content);d.prototype.constructor=h.FileSave;d.saveAs=g;h.FileSave=d})(window);
(function(k){k.Sankaku.Iro=function(){function d(){throw Error("Iro can't create instance");}d.rgb2hsl=function(d,g,f){d/=255;g/=255;f/=255;var e=Math.max(d,g,f),c=Math.min(d,g,f),b,a,m;a=(e+c)/2;if(e===c)b=c=0;else{m=e-c;c=0.5<a?m/(2-e-c):m/(e+c);switch(e){case d:b=(g-f)/m+(g<f?6:0);break;case g:b=(f-d)/m+2;break;case f:b=(d-g)/m+4}b/=6}return{h:b,s:c,l:a}};d.hsl2rgb=function(d,g,f){function e(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*c:0.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a}if(0===g)f=g=
d=f;else{var c=0.5>f?f*(1+g):f+g-f*g,b=2*f-c;f=e(b,c,d+1/3);g=e(b,c,d);d=e(b,c,d-1/3)}return{r:255*f,g:255*g,b:255*d}};d.rgb2hsv=function(d,g,f){d/=255;g/=255;f/=255;var e=Math.max(d,g,f),c=Math.min(d,g,f),b,a=e-c;if(e===c)b=0;else{switch(e){case d:b=(g-f)/a+(g<f?6:0);break;case g:b=(f-d)/a+2;break;case f:b=(d-g)/a+4}b/=6}return{h:b,s:0===e?0:a/e,v:e}};d.hsv2rgb=function(d,g,f){var e,c,b,a=Math.floor(6*d),m=6*d-a;d=f*(1-g);var q=f*(1-m*g);g=f*(1-(1-m)*g);switch(a%6){case 0:e=f;c=g;b=d;break;case 1:e=
q;c=f;b=d;break;case 2:e=d;c=f;b=g;break;case 3:e=d;c=q;b=f;break;case 4:e=g;c=d;b=f;break;case 5:e=f,c=d,b=q}return{r:parseInt(255*e,10),g:parseInt(255*c,10),b:parseInt(255*b,10)}};d.hex2rgb=function(d){if("string"!==typeof d)return null;d=d.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(d,f,e,c){return f+f+e+e+c+c});return(d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(d))?{r:parseInt(d[1],16),g:parseInt(d[2],16),b:parseInt(d[3],16)}:null};d.rgb2hex=function(d,g,f){function e(c){c=c.toString(16);
return 1===c.length?"0"+c:c}return"#"+e(d)+e(g)+e(f)};d.int2hex=function(d){d=Math.floor(d);d=d.toString(16);if(6>d.length)for(var g=6-d.length;g;)d="0"+d,--g;return"#"+d};return d}()})(window);
(function(k){k.Sankaku.List=function(){function d(){throw Error("List can't create instance");}var h=Math.random,g=Math.floor,f=Math.max;d.word=function(e,c){var b=[],a;for(a=0;a<e;a++)b[a]=c;return b};d.zero=function(e){return this.word(e,0)};d.shuffle=function(e){for(var c=[],b=e.length,a;b;)a=g(h()*e.length),a in e&&(c.push(e[a]),delete e[a],--b);return c};d.max=function(e){return f.apply(null,e)};return d}()})(window);
(function(k){k.Sankaku.Num=function(){function d(){throw Error("Num can't create instance");}var h=k.parseFloat,g=Math.random,f=Math.floor,e=Math.PI;d.ONE_DEG=e/180;d.ONE_RAD=180/e;d.FORTY_FIVE=e/4;d.NINETY=e/2;d.ONE_EIGHTY=e;d.THREE_SIXTY=2*e;d.is=function(c){return!isNaN(h(c))&&isFinite(c)};d.random=function(c,b){d.is(b)||(b=c,c=0);return c+f(g()*(b-c+1))};d.deg2rad=function(c){return c*d.ONE_DEG};d.rad2deg=function(c){return c*d.ONE_RAD};return d}()})(window);
(function(k){k.Sankaku.Distribute=function(){function d(){throw Error("Distribute can't create instance");}var h=Math.sqrt,g=Math.sin,f=Math.cos,e=Math.random,c=2*Math.PI;d.circle=function(b,a,m){var d;b*=h(e());d=e()*c;return{x:0.5*a+f(d)*b,y:0.5*m+g(d)*b}};return d}()})(window);
(function(k){var d=k.Math;k.Sankaku.Vector2D=function(){function h(a,b){this.x=a||0;this.y=b||0}var g=d.floor,f=d.ceil,e=d.round,c=d.cos,b=d.sin,a=d.atan2,m=d.sqrt,q=d.min,r=d.acos,l=h.prototype;l.constructor=h;l.draw=function(a){a.beginPath();a.moveTo(0,0);a.lineTo(this.x,this.y);a.closePath();return this};l.clone=function(){return new h(this.x,this.y)};l.zero=function(){this.y=this.x=0;return this};l.isZero=function(){return 0===this.x&&0===this.y};l.set=function(a,b){this.x=a;this.y=b;return this};
l.setX=function(a){this.x=a;return this};l.setY=function(a){this.y=a;return this};l.copy=function(a){this.x=a.x;this.y=a.y;return this};l.add=function(a){this.x+=a.x;this.y+=a.y;return this};l.addScalar=function(a){this.x+=a;this.y+=a;return this};l.addNew=function(a){return new h(this.x+a.x,this.y+a.y)};l.addVector=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this};l.sub=function(a){this.x-=a.x;this.y-=a.y;return this};l.subNew=function(a){return new h(this.x-a.x,this.y-a.y)};l.subVector=function(a,
b){this.x=a.x-b.x;this.y=a.y-b.y;return this};l.multiply=function(a){this.x*=a.x;this.y*=a.y;return this};l.multiplyScalar=function(a){this.x*=a;this.y*=a;return this};l.multiplyNew=function(a){return new h(this.x*a.x,this.y*a.y)};l.divide=function(a){this.x/=a.x;this.y/=a.y;return this};l.divideScalar=function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this};l.divideNew=function(a){return new h(this.x/a.x,this.y/a.y)};l.min=function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=
a.y);return this};l.max=function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this};l.clamp=function(a,b){this.min(a);this.max(b);return this};l.clampScalar=function(a,b){var c,m;c=new h;m=new h;c.set(a,a);m.set(b,b);return this.clamp(c,m)};l.floor=function(){this.x=g(this.x);this.y=g(this.y);return this};l.ceil=function(){this.x=f(this.x);this.y=f(this.y);return this};l.round=function(){this.x=e(this.x);this.y=e(this.y);return this};l.roundToZero=function(){this.x=0>this.x?f(this.x):
g(this.x);this.y=0>this.y?f(this.y):g(this.y);return this};l.negate=function(){return this.multiplyScalar(-1)};l.dot=function(a){return this.x*a.x+this.y*a.y};l.lengthSq=function(){return this.x*this.x+this.y*this.y};l.length=function(){return m(this.lengthSq())};l.setLength=function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this};l.setAngle=function(a){var m=this.length(),m=m||0.001;this.x=c(a)*m;this.y=b(a)*m;return this};l.angle=function(){return a(this.y,this.x)};l.normalize=
function(){return this.divideScalar(this.length())};l.distanceSq=function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a};l.distance=function(a){return m(this.distanceSq(a))};l.lerp=function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this};l.equals=function(a){return a.x===this.x&&a.y===this.y};l.fromArray=function(a){this.x=a[0];this.y=a[1];return this};l.toArray=function(){return[this.x,this.y]};l.truncate=function(a){a=q(a,this.length());return this.setLength(a)};l.reverse=function(){this.negate();
return this};l.isNormalize=function(){return 1===this.length()};l.perpendicular=function(){return new h(-this.y,this.x)};l.sign=function(a){return 0>this.perpendicular().dot(a)?-1:1};h.angleBetween=function(a,b){a.isNormalize()||(a=a.clone().normalize());b.isNormalize()||(b=b.clone().normalize());return r(a.dot(b))};return h}()})(window);
(function(k){var d=k.Math;k.Sankaku.Triangle=function(){function h(a,b,c){this.a=a;this.b=b;this.c=c;var d=b.x-a.x,l=b.y-a.y,h=c.x-a.x,k=c.y-a.y,s=d*(a.x+b.x)+l*(a.y+b.y),p=h*(a.x+c.x)+k*(a.y+c.y),n=2*(d*(c.y-b.y)-l*(c.x-b.x));1E-6>g(n)?(h=f(a.x,b.x,c.x),s=f(a.y,b.y,c.y),d=0.5*(e(a.x,b.x,c.x)-h),a=0.5*(e(a.y,b.y,c.y)-s),this.x=h+d,this.y=s+a):(b=(k*s-l*p)/n,c=(d*p-h*s)/n,d=b-a.x,a=c-a.y,this.x=b,this.y=c);this.r=d*d+a*a}var g=d.abs,f=d.min,e=d.max,c=d.round,b=h.prototype;b.constructor=h;b.draw=function(a){var b=
this.a,c=this.b,e=this.c;a.beginPath();a.moveTo(b.x,b.y);a.lineTo(c.x,c.y);a.lineTo(e.x,e.y);a.closePath()};b.centroid=function(){return{x:c((this.a.x+this.b.x+this.c.x)/3),y:c((this.a.y+this.b.y+this.c.y)/3)}};return h}()})(window);
(function(k){k=k.Sankaku;var d=k.Triangle;k.Delaunay=function(){function h(){throw Error("Sankaku can't create instance.");}h.triangulate=function(g){if(3>g.length)return[];var f,e,c,b,a,m,q,r,l,h=function(a){var b=a.length,c,m,e,d,f;a:for(;b;)for(m=a[--b],c=a[--b],e=b;e;)if(f=a[--e],d=a[--e],c===d&&m===f||c===f&&m===d){a.splice(b,2);a.splice(e,2);b-=2;continue a}};g.sort(function(a,b){return b.x-a.x});e=g.length-1;f=g[e];c=f.x;b=g[0].x;for(m=a=f.y;e--;)f.y<a&&(a=f.y),f.y>m&&(m=f.y);q=b-c;r=m-a;e=
q>r?q:r;f=0.5*(b+c);q=0.5*(m+a);m=[new d({x:f-20*e,y:q-e,__sentinel:!0},{x:f,y:q+20*e,__sentinel:!0},{x:f+20*e,y:q-e,__sentinel:!0})];a=[];c=[];for(e=g.length;e--;){c.length=0;b=m.length;for(f=g[e];b--;)l=m[b],q=f.x-l.x,0<q&&q*q>l.r?(a.push(l),m.splice(b,1)):(r=f.y-l.y,q*q+r*r>l.r||(c.push(l.a,l.b,l.b,l.c,l.c,l.a),m.splice(b,1)));h(c);for(b=c.length;b;)r=c[--b],q=c[--b],m.push(new d(q,r,f))}Array.prototype.push.apply(a,m);for(e=a.length;e--;)g=a[e],(g.a.__sentinel||g.b.__sentinel||g.c.__sentinel)&&
a.splice(e,1);return a};return h}()})(window);
(function(k){var d=k.Sankaku,h=d.Vector2D,g=d.Num,f=d.Iro;d.Object2D=function(){function e(){this._position=new h;this.rotation=this.y=this.x=0;this.width=20;this.height=10;this.scale=1;this.parent=this.scene=null;this.children=[];this.visible=!0;this._alpha=1;this._mask=null}var c=Math.cos,b=Math.sin,a=e.prototype;a.constructor=e;d.EventDispatcher.initialize(a);a.clone=function(){return this._clone()};a._clone=function(){var a=new e;a.setPosition(this._position.clone());a.width=this.width;a.height=
this.height;a.rotation=this.rotation;a.scale=this.scale;a.parent=parent&&parent.clone();a._alpha=this._alpha;a.visible=this.visible;a.children=this.children.splice();a.setColor(this._color);a.setMask(this.mask().clone());return a};a.setColor=function(a){this._color=a;this._rgb=f.hex2rgb(a);this._rgb.a=this._alpha;return this};a.setRGB=function(a){var b=this._rgb;b.r=a.r;b.g=a.g;b.b=a.b;this._color=f.rgb2hex(a.r,a.g,a.b);return this};a.rgba=function(){return this._rgb};a.setAlpha=function(a){this._alpha=
a;return this.setColor(this._color)};a.alpha=function(){return this._alpha};a.setPosition=function(a){this._position=a;this.x=a.x;this.y=a.y;return this};a.position=function(){return this._position};a.setX=function(a){this.x=a;this._position.x=a;return this};a.setY=function(a){this.y=a;this._position.y=a;return this};a.setRotate=function(a){this.rotation=g.deg2rad(a);return this};a.rotate=function(){return g.rad2deg(this.rotation)};a.radian=function(){return this.rotation};a.setMask=function(a){a.parent=
this;a.maskMode=!0;this._mask=a;this.add(a);return this};a.removeMask=function(){var a=this._mask;a.parent=null;a.maskMode=!1;this._mask=null;return this};a.mask=function(){return this._mask};a.bounding=function(){var a=this.parent,e=this.x,d=this.y,f=this.width*this.scale,g=this.height*this.scale,f=0.5*f,g=0.5*g,h=this.rotation,k,p,n,t,v,x;p={scale:this.scale,rotation:this.rotation,alpha:this._alpha,visible:this.visible,x:this.x,y:this.y};a&&this.scene!==a&&(k=a.bounding(),p.visible=k.e.visible,
p.visible&&(e*=k.e.scale,d*=k.e.scale,f=this.width*k.e.scale,g=this.height*k.e.scale,f*=0.5,g*=0.5,h=k.e.rotation+this.rotation,x=a.x+e*c(k.e.rotation)-d*b(k.e.rotation),d=a.y+e*b(k.e.rotation)+d*c(k.e.rotation),e=x,p.scale=k.e.scale*this.scale,p.alpha=k.e.alpha*this._alpha,p.rotation=h));k=b(h);v=c(h);a=-f;h=-g;n=f;t=g;f=v*a;g=v*h;h*=k;a*=k;x=v*n;v*=t;n*=k;t*=k;k={x:f-h+e,y:g+a+d};g={x:x-h+e,y:g+n+d};h={x:x-t+e,y:v+n+d};f={x:f-t+e,y:v+a+d};p.x=e;p.y=d;return this._bounding=e={a:k,b:g,c:h,d:f,e:p}};
a.add=function(a){if(a===this)return this;a.parent&&a.parent.remove(a);a.parent=this;this.children.push(a);var b=this.scene;b&&b.addChild(a);return this};a.remove=function(a){var b;b=this.children.indexOf(a);if(-1===b)return this;a.parent=null;this.children.splice(b,1);(b=this.scene)&&b.removeChild(a);return this};a.draw=function(a){this.visible&&0!==this._alpha&&0!==this.scale&&(!this._mask||this._mask&&this._mask.ready)&&(this.beginDraw(a),this._draw(a),this.exitDraw(a));var b=this.children,c,e;
c=0;for(e=b.length;c<e;c++)b[c].draw(a);return this};a._draw=function(a){};a.beginDraw=function(a){};a.exitDraw=function(a){};a.inside=function(a,b){this.visible&&(b=this._inside(a,b));var c=this.children,e,d;e=0;for(d=c.length;e<d;e++)b=c[e].inside(a,b);return b};a._area=function(a,b,c){return c.x*b.y-b.x*c.y-(c.x*a.y-a.x*c.y)+(b.x*a.y-a.x*b.y)};a._inside=function(a,b){var c=this.bounding();0<this._area(c.a,c.b,a)||0<this._area(c.b,c.c,a)||0<this._area(c.c,c.d,a)||0<this._area(c.d,c.a,a)||b.push(this);
return b};a.swap=function(a,b){var c=this.children,e=c.indexOf(a),d=c.indexOf(b);-1!==e&&-1!==d&&(c[d]=a,c[e]=b);return this};a.highest=function(a){var b=this.children,c=b.indexOf(a);-1!==c&&(b.splice(c,1),b.push(a));return this};a.render=function(a,b){this.beginRender(a,b);var c=this.children,e,d;e=0;for(d=c.length;e<d;e++)c[e].render(a,b);return this};a.beginRender=function(a,b){this.prepareRender(a,b)};a.prepareRender=function(a,b){};a._rgba=function(a,b){return{r:a.r,g:a.g,b:a.b,a:a.a*b}};return e}()})(window);
(function(k){var d=k.Sankaku,h=d.Object2D;d.Scene=function(){function g(){h.call(this);this.scene=this}d.extend(h,g);var f=g.prototype;f.constructor=g;f.addChild=function(e){e.scene=this};f.removeChild=function(e){e.scene=null};f.inside=function(e,c){var b=this.children,a,d;a=0;for(d=b.length;a<d;a++)c=b[a].inside(e,c);return c};return g}()})(window);
(function(k){var d=k.Sankaku,h=d.Object2D,g=d.Vector2D,f=d.Iro;d.Shape=function(){function e(b,a,c,d,f,g){h.call(this);this.setX(b);this.setY(a);this.width=c||20;this.height=d||10;this._fill=g||e.STROKE;this._line=1;this._rgb={r:0,g:0,b:0};this._color=f=f||"#000000";this.setColor(f);this.setBorder(this.setLine,this._color)}d.extend(h,e);e.FILL="shape_fill";e.STROKE="shape_stroke";e.BOTH="shape_both";var c=e.prototype;c.constructor=e;c.clone=function(){var b=new e(this.x,this.y,this.width,this.height,
this._color,this._fill);b.rotation=this.rotation;b.scale=this.scale;b.visible=this.visible;b._alpha=this._alpha;b._rgb=Object.create(this._rgb);b._line=this._line;b._border={setLine:this._border.setLine,rgb:this._border.rgb};this._mask&&b.setMask(this.mask().clone());return b};c.radius=function(){var b=this.bounding(),a=b.a,b=b.c;return 0.5*(new g(a.x,a.y)).distance(new g(b.x,b.y))};c.setBorder=function(b,a){var c=f.hex2rgb(a);c.a=this._alpha;this._border={setLine:b,rgb:c};return this};c.setMode=
function(b){this._fill=b;return this};c.mode=function(){return this._fill};c.setLine=function(b){this._line=b;return this};c.line=function(){return this._line};c._draw=function(b){var a=this.paint(b),c=a.e;if(c.visible&&0!==c.alpha&&0!==c.scale)switch(c=this._rgba(this._rgb,a.e.alpha),this._fill){case e.STROKE:this.stroke(b,this._line,c);break;case e.FILL:this.fill(b,c);break;case e.BOTH:a=this._rgba(this._border._rgb,a.e.alpha),this.stroke(b,this._border._line,a),this.fill(b,c)}};c.fill=function(b,
a){b.fillStyle="rgba("+a.r+","+a.g+","+a.b+","+a.a+")";b.fill()};c.stroke=function(b,a,c){b.lineWidth=a;b.strokeStyle="rgba("+c.r+","+c.g+","+c.b+","+c.a+")";b.stroke()};c.paint=function(b){var a=this.bounding(),c=a.a,e=a.b,d=a.c,f=a.d;a.e.visible&&(b.beginPath(),b.moveTo(c.x,c.y),b.lineTo(e.x,e.y),b.lineTo(d.x,d.y),b.lineTo(f.x,f.y),b.lineTo(c.x,c.y),b.closePath());return a};return e}()})(window);
(function(k){var d=k.Sankaku,h=d.Shape,g=d.Vector2D;d.Circle=function(){function f(a,b,c,e,d){h.call(this,a,b,2*c,2*c,e,d);this._radius=c||this.width}var e=2*Math.PI,c=Math.pow;d.extend(h,f);var b=f.prototype;b.constructor=f;b.radius=function(){return this._radius*this.scale};b.clone=function(){var a=new f(this.x,this.y,this._radius,this._color,this._fill);a.rotation=this.rotation;a.scale=this.scale;a.visible=this.visible;a._alpha=this._alpha;a._rgb=Object.create(this._rgb);a._line=this._line;a._border=
{line:this._border.line,rgb:this._border.rgb};return a};b.paint=function(a){var b=this.bounding(),c=b.e;c.visible&&(a.beginPath(),a.arc(c.x,c.y,this._radius*c.scale,0,e,!1),a.closePath());return b};b._inside=function(a,b){var e=this._radius;c(this.x-a.x,2)+c(this.y-a.y,2)<e*e&&b.push(this);return b};b.contain=function(a){var b=[];this._inside(a,b);return 0<b.length};b.intersect=function(a){var b=a.segment();a=b.end;var c,e,d,f,h,k,p,n;c=b.start.bounding().e;e=a.bounding().e;b=new g(c.x,c.y);d=new g(e.x,
e.y);if(this.contain(b)||this.contain(d))return!0;a=this.radius();f=this.bounding().e;h=f.x-a;k=f.x+a;p=f.y-a;n=f.y+a;if(c.x<h&&e.x<h||c.x>k&&e.x>k||c.y<p&&e.y<p||c.y>n&&e.y>n)return!1;e=new g(f.x,f.y);c=b.distance(e);e=d.distance(e);b=b.distance(d);return Math.sqrt((b+e+c)*(b-e+c)*(-b+e+c)*(b+e-c)/(4*b*b))<=a};return f}()})(window);
(function(k){var d=k.Sankaku,h=d.Shape;d.Tripod=function(){function g(e,c,b,a,d,f){h.call(this,e,c,b,a,d,f)}d.extend(h,g);var f=g.prototype;f.constructor=g;f.clone=function(){var e=new g(this.x,this.y,this.width,this.height,this._color,this._fill);e.rotation=this.rotation;e.scale=this.scale;e.visible=this.visible;e._alpha=this._alpha;e._rgb=Object.create(this._rgb);e._line=this._line;e._border={line:this._border.line,rgb:this._border.rgb};return e};f.paint=function(e){var c=this.bounding(),b=c.a,
a=c.b,d=c.c,f=c.d;c.e.visible&&(e.beginPath(),e.moveTo(b.x,b.y),e.lineTo(0.5*(a.x+d.x),0.5*(a.y+d.y)),e.lineTo(f.x,f.y),e.lineTo(b.x,b.y),e.closePath());return c};f._inside=function(e,c){var b=this.bounding(),a=b.b,d=b.c,a={x:0.5*(a.x+d.x),y:0.5*(a.y+d.y)};0<this._area(b.a,a,e)||0<this._area(a,b.d,e)||0<this._area(b.d,b.a,e)||c.push(this);return c};return g}()})(window);
(function(k){var d=k.Sankaku,h=d.Shape,g=d.Num;d.Star=function(){function f(a,b,c,e,d,f,g){h.call(this,a,b,c,c,e,d);this._radius=c||this.width;this._points=f||5;this._inner=g||0.475*c}var e=Math.sin,c=Math.cos;d.extend(h,f);var b=f.prototype;b.constructor=f;b.radius=function(){return this._radius};b.clone=function(){var a=new f(this.x,this.y,this._radius,this._color,this._fill,this._points);a.rotation=this.rotation;a.scale=this.scale;a.visible=this.visible;a._alpha=this._alpha;a._rgb=Object.create(this._rgb);
a._line=this._line;a._border={line:this._border.line,rgb:this._border.rgb};return a};b.paint=function(a){var b=this.bounding(),d=b.e,f,h,k,u,s,p,n,t,v,x;if(d.visible){f=this._points;h=2*f;f=g.ONE_EIGHTY/f;k=g.NINETY;u=d.scale;s=this._radius*u;u*=this._inner;p=d.x;n=d.y;d=d.rotation;a.beginPath();for(t=0;t<=h;++t)v=t*f-k+d,x=t%2?u:s,a.lineTo(p+x*c(v),n+x*e(v));a.closePath()}return b};return f}()})(window);
(function(k){var d=k.Sankaku,h=d.Object2D,g=d.Shape;d.Line=function(){function f(c,b,a,e){h.call(this);this._v1=c;this._v2=b;this._fill=g.STROKE;this._line=e||1;this._rgb={r:0,g:0,b:0};this._color=a=a||"#000000";this.setColor(a)}d.extend(h,f);var e=f.prototype;e.constructor=f;e._clone=function(){var c=new f(this._v1,this._v2,this._color,this._line);c.setAlpha(this._alpha);c.scale=this.scale;c.visible=this.visible;c.setColor(this._color);return c};e.segment=function(){return{start:this._v1,end:this._v2}};
e.setPosition=function(c){return this};e.setX=function(c){return this};e.setY=function(c){return this};e.setRotate=function(c){return this};e.add=function(c){return this};e.remove=function(c){return this};e.bounding=function(){var c=this.parent,b;b={scale:this.scale,rotation:this.rotation,alpha:this._alpha,x:this.x,y:this.y};c&&this.scene!==c&&(b.scale=c.scale*this.scale,b.alpha=c.alpha()*this._alpha);return this._bounding=c={e:b,a:this._v1.bounding().e,b:this._v2.bounding().e}};e._inside=function(c,
b){return b};e._draw=function(c){var b=this.paint(c),b=this._rgba(this._rgb,b.e.alpha);this.stroke(c,this._line,b)};e.stroke=function(c,b,a){c.lineWidth=b;c.strokeStyle="rgba("+a.r+","+a.g+","+a.b+","+a.a+")";c.stroke()};e.paint=function(c){var b=this._v1.bounding().e,a=this._v2.bounding().e,e=this.bounding();c.beginPath();c.lineTo(b.x,b.y);c.lineTo(a.x,a.y);c.closePath();return e};return f}()})(window);
(function(k){var d=k.Sankaku,h=d.Shape,g=d.LoadImage;d.Bitmap=function(){function f(c,b,a,e,f){h.call(this,c,b,a,e);c=this.onLoad.bind(this);b=this.onError.bind(this);this._boundLoad=c;this._boundError=b;this._fill=h.FILL;this._img=f;this._bitmap=null;this.ready=!1;f.constructor===d.LoadImage?(f.addEventListener(g.COMPLETE,c),f.addEventListener(g.ERROR,b),f.load()):f.constructor===Image&&(this._bitmap=f)}d.extend(h,f);var e=f.prototype;e.constructor=f;e.dispose=function(){var c=this._img;c.removeEventListener(g.COMPLETE,
this._boundLoad);c.removeEventListener(g.ERROR,this._boundError)};e.onLoad=function(c){this.dispose();this._bitmap=c.img};e.onError=function(){this.dispose()};e.clone=function(){var c=this._img,b;c.constructor===d.LoadImage?b=c.clone():(b=new Image,b.src=c.src);c=new f(this.x,this.y,this.width,this.height,b);c.rotation=this.rotation;c.scale=this.scale;c.visible=this.visible;c._alpha=this._alpha;return c};e.setMode=function(){};e._draw=function(c){if(this._bitmap){var b=this.bounding(),a=b.e;this.ready=
!0;a.visible&&0<a.alpha&&0<a.scale&&this.fill(c,b,this._bitmap)}};e.fill=function(c,b,a){b=b.e;var e=b.alpha,d=b.rotation,f=b.scale,g=!1,h,k,s;h=this.width*f;f*=this.height;k=b.x-0.5*h;s=b.y-0.5*f;if(this.maskMode||1>e||0!==d)c.save(),g=!0,1>e&&(c.globalAlpha=e),0!==d&&(c.setTransform(1,0,0,1,0,0),c.translate(b.x,b.y),c.rotate(d),k=0.5*-h,s=0.5*-f),this.maskMode&&(c.globalCompositeOperation="destination-in");c.drawImage(a,0,0,a.width,a.height,k,s,h,f);g&&c.restore()};return f}()})(window);
(function(k){var d=k.Sankaku,h=d.Vector2D,g=d.Object2D,f=d.Tripod;d.Vehicle=function(){function e(a){g.call(this);this._velocity=new h;this._mass=1;this._speed=10;this._behavior=e.BOUNCE;this.bottom=this.right=this.top=this.left=0;this.maskMode=!1;this.setView(a||new f(this.x,this.y,this.width,this.height))}var c=Math.abs;d.extend(g,e);e.WRAP="vehicle_wrap";e.BOUNCE="vehicle_bounce";var b=e.prototype;b.constructor=e;d.EventDispatcher.initialize(b);b.setView=function(a){a.setPosition(this._position);
this.width=a.width;this.height=a.height;this.rotation=a.rotation;this.alpha=a.alpha;this.scale=a.scale;this._view=a};b.view=function(){return this._view};b.clone=function(){var a=new e(this._view.clone());a.setPosition(this._position.clone());a.width=this.width;a.height=this.height;a.rotation=this.rotation;a.scale=this.scale;a._velocity=this._velocity.clone();a._mass=this._mass;a._speed=this._speed;a._behavior=this._behavior;return a};b.setPadding=function(a,b,c,e){this.top=a;this.right=b||a;this.bottom=
c||a;this.left=e||a;return this};b.setMass=function(a){this._mass=a;return this};b.mass=function(){return this._mass};b.setSpeed=function(a){this._speed=a;return this};b.speed=function(){return this._speed};b.setBehavior=function(a){this._behavior=a;return this};b.behavior=function(){return this._behavior};b.setVelocity=function(a){this._velocity=a;return this};b.velocity=function(){return this._velocity};b.draw=function(a){this.visible&&0<this._alpha&&0<this.scale&&this._view.draw(a)};b.update=function(a,
b){this._update(a,b)};b._update=function(a,b){var d=this._velocity,f=this._position,g=this._view;a-=this.right;b-=this.bottom;d.truncate(c(this._speed));f.add(d);switch(this._behavior){case e.WRAP:this.wrap(a,b);break;default:this.bounce(a,b)}this.x=f.x;this.y=f.y;this.rotation=d.angle();g.x=f.x;g.y=f.y;g.rotation=d.angle();g.width=this.width;g.height=this.height};b.wrap=function(a,b){var c=this._position,e=!1,d=this.left,f=this.top;c.x>a&&(c.x=d,e=!0);c.x<d&&(c.x=a,e=!0);c.y>b&&(c.y=f,e=!0);c.y<
f&&(c.y=b,e=!0);e&&this.dispatchEvent({type:"wrap",currentTarget:this})};b.bounce=function(a,b){var c=this._velocity,e=this._position,d=!1,f=this.left,g=this.top;e.x>a?(e.x=a,c.x*=-1,d=!0):e.x<f&&(e.x=f,c.x*=-1,d=!0);e.y>b?(e.y=b,c.y*=-1,d=!0):e.y<g&&(e.y=g,c.y*=-1,d=!0);d&&this.dispatchEvent({type:"bounce",currentTarget:this})};b.beginRender=function(a,b){this.prepareRender();this.update(a,b)};return e}()})(window);
(function(k){var d=k.Sankaku,h=d.Vehicle,g=d.Vector2D;d.SteeredVehicle=function(){function f(b){h.call(this,b);this._force=new g;this._force_max=1;this._force_arrival=100;this._avoid_distance=300;this._avoid_buffer=20;this._avoid_insight=200;this._avoid_close=60}var e=0.5*Math.PI;d.extend(h,f);var c=f.prototype;c.constructor=f;c.clone=function(){var b=Object.create(this);b.setView(this._view.clone());b._force=this._force.clone();b.setPosition(this._position.clone());return b};c.max=function(){return this._force_max};
c.setMax=function(b){this._force_max=b;return this};c.arrival=function(){return this._force_arrival};c.setArrival=function(b){this._force_arrival=b;return this};c.setForce=function(b){this._force=b;return this};c.force=function(){return this._force};c.setBuffer=function(b){this._avoid_buffer=b;return this};c.buffer=function(){return this._avoid_buffer};c.setInsight=function(b){this._avoid_insight=b;return this};c.insight=function(){return this._avoid_insight};c.setClose=function(b){this._avoid_close=
b;return this};c.close=function(){return this._avoid_close};c.setAvoidDistance=function(b){this._avoid_distance=b;return this};c.avoidDistance=function(){return this._avoid_distance};c.update=function(b,a){this._force.truncate(this._force_max).divideScalar(this._mass);this._velocity.add(this._force);this._force=new g;this._update(b,a)};c.seek=function(b){b=b.subNew(this._position);b.normalize().multiplyScalar(this._speed).sub(this._velocity);this._force.add(b)};c.flee=function(b){b=b.subNew(this._position);
b.normalize().multiplyScalar(this._speed).sub(this._velocity);this._force.sub(b)};c.arrive=function(b){var a=b.subNew(this._position),c=this._force_arrival;a.normalize();b=this._position.distance(b);b>c?a.multiplyScalar(this._speed):a.multiplyScalar(this._speed*b/c);a.sub(this._velocity);this._force.add(a)};c.pursue=function(b){var a=this._position.distance(b.position()),c=b.position().clone();c.add(b._velocity.multiplyNew(a));this.seek(c)};c.evade=function(b){var a=this._position.distance(b.position())/
this._speed,c=b.position().clone();c.sub(b._velocity.multiplyNew(a));this.flee(c)};c.avoid=function(b){var a,c,d,f,g,h,k,s;k=0;for(s=b.length;k<s;k++)a=b[k],c=this._velocity.clone().normalize(),d=a.position().subNew(this._position),f=d.dot(c),0<f&&(g=c.clone(),g.multiplyScalar(this._avoid_distance),h=c.clone(),h.multiplyScalar(f),f=h.subNew(d).length(),f<a.radius()+this._avoid_buffer&&h.length()<g.length()&&(a=c.clone(),a.multiplyScalar(this._speed),a.setAngle(a.angle()+d.sign(this._velocity)*e),
d=h.length()/g.length(),a.multiplyScalar(1-d),this._force.add(a),this._velocity.multiplyScalar(d)))};return f}()})(window);
(function(k){var d=k.Sankaku,h=d.SteeredVehicle,g=d.Vector2D;d.Wander=function(){function f(b){h.call(this,b);this._wander_angle=0;this._wander_distance=10;this._wnder_radius=5;this._wander_range=1;this._wander_range2=0.5*this._wander_range}var e=Math.random;d.extend(h,f);var c=f.prototype;c.constructor=f;c.clone=function(){var b=Object.create(this);b.setView(this._view.clone());return b};c.setWanderAngle=function(b){this._wander_angle=b;return this};c.wanderAngle=function(){return this._wander_angle};
c.setWanderDistance=function(b){this._wander_distance=b;return this};c.wanderDistance=function(){return this._wander_distance};c.setWanderRadius=function(b){this._wnder_radius=b;return this};c.wanderRadius=function(){return this._wnder_radius};c.setWanderRange=function(b){this._wander_range=b;this._wander_range2=0.5*b;return this};c.wanderRange=function(){return this._wander_range};c.wander=function(){var b=this._velocity.clone().normalize().multiplyScalar(this._wander_distance),a=new g;a.setLength(this._wnder_radius);
a.setAngle(this._wander_angle);this._wander_angle+=e()*this._wander_range-this._wander_range2;b.add(a);this._force.add(b)};c.beginRender=function(b,a){this.prepareRender();this.wander(this._paths,this._loop);this.update(b,a)};return f}()})(window);
(function(k){var d=k.Sankaku,h=d.SteeredVehicle,g=d.Vector2D;d.Flock=function(){function f(c){h.call(this,c);this._flock_flockInsight=200;this._flock_flockClose=60}d.extend(h,f);var e=f.prototype;e.constructor=f;e.clone=function(){var c=Object.create(this);c.setView(this._view.clone());c.position(this._position.clone());c._velocity=this._velocity.clone();c._force=this._force.clone();return c};e.setFlockInsight=function(c){this._flock_flockInsight=c;return this};e.flockInsight=function(){return this._flock_flockInsight};
e.setFlockClose=function(c){this._flock_flockClose=c;return this};e.flockClose=function(){return this._flock_flockClose};e.flock=function(c){var b=this._velocity.clone(),a=new g,e=0,d,f,h;f=0;for(h=c.length;f<h;f++)d=c[f],d!==this&&this.tooInsight(d)&&(b.add(d.velocity()),a.add(d.position()),this.tooClose(d)&&this.flee(d.position()),++e);0<e&&(b.divideScalar(e),a.divideScalar(e),this.seek(a),this._force.add(b.sub(this._velocity)))};e.tooInsight=function(c){var b;if(this._position.distance(c._position)>
this._flock_flockInsight)return!1;b=this._velocity.clone().normalize();return 0>c._position.subNew(this._position).dot(b)};e.tooClose=function(c){return this._position.distance(c._position)<this._flock_flockClose};e.setFlocks=function(c){this._flocks=c;return this};e.beginRender=function(c,b){this.prepareRender();this.flock(this._flocks);this.update(c,b)};return f}()})(window);
(function(k){var d=k.Sankaku,h=d.SteeredVehicle;d.FollowPath=function(){function g(e){h.call(this,e);this._index=0;this._threshold=20}d.extend(h,g);var f=g.prototype;f.constructor=g;f.clone=function(){var e=Object.create(this);e.setView(this._view.clone());e.position(this._position.clone());e._velocity=this._velocity.clone();e._force=this._force.clone();return e};f.follow=function(e,c){c=!!c;var b=e[this._index],a;b&&(a=e.length-1,this._position.distance(b)<this._threshold&&(this._index>=a?c&&(this._index=
0):this._index++),this._index>=a&&!c?this.arrive(b):this.seek(b))};f.setPath=function(e){this._paths=e;return this};f.setLoop=function(e){this._loop=e;return this};f.beginRender=function(e,c){this.prepareRender();this.follow(this._paths,this._loop);this.update(e,c)};return g}()})(window);
(function(k){k.Sankaku.Zanzo=function(){function d(d){this._limit=d;this._objects=[]}var h=d.prototype;h.constructor=d;h.setLimit=function(d){this._limit=d};h.add=function(d){var f=this._objects,e=[],c,b;0<this._limit&&f.length>=this._limit&&f.shift();c=0;for(b=d.length;c<b;c++)f=d[c],e.push(f.clone());this._objects.push(e)};h.draw=function(d,f){var e=this._objects,c,b,a,h,k,r,l;k=e.length;a=1/(k+1);d.save();for(h=0;h<k;h++)for(c=e[h],b=a*(h+1),d.globalAlpha=b,r=0,l=c.length;r<l;r++)b=c[r],b.draw(d),
f&&f.call(d);d.restore()};h.length=function(){return this._objects.length};h.clear=function(){this._objects=[];return this};return d}()})(window);(function(k){k.Sankaku.Inside=function(){function d(d){this._scene=d;this._contains=[]}var h=d.prototype;h.constructor=d;h.check=function(d){var f=this._contains;f.length=0;f=this._scene.inside(d,f);return f.reverse()};return d}()})(window);
