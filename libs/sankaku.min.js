/*
 inazumatv.com
 @author (at)taikiken / http://inazumatv.com
 @date 2014/06/20 - 11:55

 Copyright (c) 2011-2014 inazumatv.com, inc.

 Distributed under the terms of the MIT license.
 http://www.opensource.org/licenses/mit-license.html

 This notice shall be included in all copies or substantial portions of the Software.

 delaunay
 original: https://github.com/ironwallaby/delaunay

 hosted on
 https://github.com/taikiken/sankaku.js
*/
var Sankaku={version:"0.0.1"};
(function(h){var g=Math.abs,b=Math.min,a=Math.max,c=Math.round,d=h.Sankaku,e=function(){function e(c,d,f){this.a=c;this.b=d;this.c=f;var r=d.x-c.x,m=d.y-c.y,l=f.x-c.x,p=f.y-c.y,k=r*(c.x+d.x)+m*(c.y+d.y),h=l*(c.x+f.x)+p*(c.y+f.y),n=2*(r*(f.y-d.y)-m*(f.x-d.x));1E-6>g(n)?(l=b(c.x,d.x,f.x),k=b(c.y,d.y,f.y),r=0.5*(a(c.x,d.x,f.x)-l),c=0.5*(a(c.y,d.y,f.y)-k),this.x=l+r,this.y=k+c):(d=(p*k-m*h)/n,f=(r*h-l*k)/n,r=d-c.x,c=f-c.y,this.x=d,this.y=f);this.r=r*r+c*c}var d=e.prototype;d.draw=function(a){var c=this.a,
b=this.b,e=this.c;a.beginPath();a.moveTo(c.x,c.y);a.lineTo(b.x,b.y);a.lineTo(e.x,e.y);a.closePath()};d.centroid=function(){return{x:c((this.a.x+this.b.x+this.c.x)/3),y:c((this.a.y+this.b.y+this.c.y)/3)}};return e}();d.Triangle=e;h.Sankaku=function(){function a(){throw Error("Sankaku can't create instance.");}a.byX=function(a,c){return c.x-a.x};a.dedup=function(a){var c=a.length,b,e,d,f,g;a:for(;c;)for(e=a[--c],b=a[--c],d=c;d;)if(g=a[--d],f=a[--d],b===f&&e===g||b===g&&e===f){a.splice(c,2);a.splice(d,
2);c-=2;continue a}};a.triangulate=function(c){if(3>c.length)return[];var b=a.dedup,d,g,h,m,l,p,k,q,n;c.sort(a.byX);g=c.length-1;d=c[g];h=d.x;m=c[0].x;for(p=l=d.y;g--;)d.y<l&&(l=d.y),d.y>p&&(p=d.y);k=m-h;q=p-l;g=k>q?k:q;d=0.5*(m+h);k=0.5*(p+l);p=[new e({x:d-20*g,y:k-g,__sentinel:!0},{x:d,y:k+20*g,__sentinel:!0},{x:d+20*g,y:k-g,__sentinel:!0})];l=[];h=[];for(g=c.length;g--;){h.length=0;m=p.length;for(d=c[g];m--;)n=p[m],k=d.x-n.x,0<k&&k*k>n.r?(l.push(n),p.splice(m,1)):(q=d.y-n.y,k*k+q*q>n.r||(h.push(n.a,
n.b,n.b,n.c,n.c,n.a),p.splice(m,1)));b(h);for(m=h.length;m;)q=h[--m],k=h[--m],p.push(new e(k,q,d))}Array.prototype.push.apply(l,p);for(g=l.length;g--;)c=l[g],(c.a.__sentinel||c.b.__sentinel||c.c.__sentinel)&&l.splice(g,1);return l};return a}()})(window);
(function(h){h.Sankaku.Iro=function(){function g(){throw Error("Iro can't create instance");}g.rgb2hsl=function(b,a,c){b/=255;a/=255;c/=255;var d=Math.max(b,a,c),e=Math.min(b,a,c),f,g,h;g=(d+e)/2;if(d===e)f=e=0;else{h=d-e;e=0.5<g?h/(2-d-e):h/(d+e);switch(d){case b:f=(a-c)/h+(a<c?6:0);break;case a:f=(c-b)/h+2;break;case c:f=(b-a)/h+4}f/=6}return{h:f,s:e,l:g}};g.hsl2rgb=function(b,a,c){function d(a,c,b){0>b&&(b+=1);1<b&&(b-=1);return b<1/6?a+6*(c-a)*b:0.5>b?c:b<2/3?a+(c-a)*(2/3-b)*6:a}if(0===a)c=a=
b=c;else{var e=0.5>c?c*(1+a):c+a-c*a,f=2*c-e;c=d(f,e,b+1/3);a=d(f,e,b);b=d(f,e,b-1/3)}return{r:255*c,g:255*a,b:255*b}};g.rgb2hsv=function(b,a,c){b/=255;a/=255;c/=255;var d=Math.max(b,a,c),e=Math.min(b,a,c),f,g=d-e;if(d===e)f=0;else{switch(d){case b:f=(a-c)/g+(a<c?6:0);break;case a:f=(c-b)/g+2;break;case c:f=(b-a)/g+4}f/=6}return{h:f,s:0===d?0:g/d,v:d}};g.hsv2rgb=function(b,a,c){var d,e,f,g=Math.floor(6*b),h=6*b-g;b=c*(1-a);var s=c*(1-h*a);a=c*(1-(1-h)*a);switch(g%6){case 0:d=c;e=a;f=b;break;case 1:d=
s;e=c;f=b;break;case 2:d=b;e=c;f=a;break;case 3:d=b;e=s;f=c;break;case 4:d=a;e=b;f=c;break;case 5:d=c,e=b,f=s}return{r:255*d,g:255*e,b:255*f}};g.hex2rgb=function(b){if("string"!==typeof b)return null;b=b.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,c,b,e){return c+c+b+b+e+e});return(b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b))?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null};g.rgb2hex=function(b,a,c){function d(a){a=a.toString(16);return 1===a.length?"0"+a:a}
return"#"+d(b)+d(a)+d(c)};g.int2hex=function(b){b=Math.floor(b);b=b.toString(16);if(3>b.length)for(var a=3-b.length;a;)b="0"+b,--a;return"#"+b};return g}()})(window);
(function(h){h.Sankaku.Vector2D=function(){function g(a,c){this.x=a||0;this.y=c||0}var b=g.prototype;b.draw=function(a){a.beginPath();a.moveTo(0,0);a.lineTo(this.x,this.y);a.closePath();return this};b.clone=function(){return new g(this.x,this.y)};b.zero=function(){this.y=this.x=0;return this};b.isZero=function(){return 0===this.x&&0===this.y};b.set=function(a,c){this.x=a;this.y=c;return this};b.setX=function(a){this.x=a;return this};b.setY=function(a){this.y=a;return this};b.copy=function(a){this.x=
a.x;this.y=a.y;return this};b.add=function(a){this.x+=a.x;this.y+=a.y;return this};b.addScalar=function(a){this.x+=a;this.y+=a;return this};b.addNew=function(a){return new g(this.x+a.x,this.y+a.y)};b.addVector=function(a,c){this.x=a.x+c.x;this.y=a.y+c.y;return this};b.sub=function(a){this.x-=a.x;this.y-=a.y;return this};b.subNew=function(a){return new g(this.x-a.x,this.y-a.y)};b.subVector=function(a,c){this.x=a.x-c.x;this.y=a.y-c.y;return this};b.multiply=function(a){this.x*=a.x;this.y*=a.y;return this};
b.multiplyScalar=function(a){this.x*=a;this.y*=a;return this};b.multiplyNew=function(a){return new g(this.x*a.x,this.y*a.y)};b.divide=function(a){this.x/=a.x;this.y/=a.y;return this};b.divideScalar=function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this};b.divideNew=function(a){return new g(this.x/a.x,this.y/a.y)};b.min=function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this};b.max=function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this};b.clamp=
function(a,c){this.min(a);this.max(c);return this};b.clampScalar=function(a,c){var b,e;b=new g;e=new g;b.set(a,a);e.set(c,c);return this.clamp(b,e)};b.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};b.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};b.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};b.roundToZero=function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):
Math.floor(this.y);return this};b.negate=function(){return this.multiplyScalar(-1)};b.dot=function(a){return this.x*a.x+this.y*a.y};b.lengthSq=function(){return this.x*this.x+this.y*this.y};b.length=function(){return Math.sqrt(this.lengthSq())};b.setLength=function(a){var c=this.length();0!==c&&a!==c&&this.multiplyScalar(a/c);return this};b.setAngle=function(a){this.length();this.x=Math.cos(a);this.y=Math.sin(a);return this};b.angle=function(){return Math.atan2(this.y,this.x)};b.normalize=function(){return this.divideScalar(this.length())};
b.distanceSq=function(a){var c=this.x-a.x;a=this.y-a.y;return c*c+a*a};b.distance=function(a){return Math.sqrt(this.distanceSq(a))};b.lerp=function(a,c){this.x+=(a.x-this.x)*c;this.y+=(a.y-this.y)*c;return this};b.equals=function(a){return a.x===this.x&&a.y===this.y};b.fomArray=function(a){this.x=a[0];this.y=a[1];return this};b.toArray=function(){return[this.x,this.y]};b.truncate=function(a){a=Math.min(a,this.length());return this.setLength(a)};b.reverse=function(){this.x*=-1;this.y*=-1;return this};
b.isNormalize=function(){return 1===this.length()};b.prev=function(){return new g(-this.y,this.x)};b.sign=function(a){return 0>this.prev().dot(a)?-1:1};g.angleBetween=function(a,c){a.isNormalize()||(a=a.clone().normalize());c.isNormalize()||(c=c.clone().normalize());return Math.acos(a.dot(c))};return g}()})(window);
(function(h){h=h.Sankaku;var g=h.Vector2D;h.Vehicle=function(){function b(){this._position=new g;this._velocity=new g;this._mass=1;this._speed=10;this._behavior=b.BOUNCE;this.rotation=this.y=this.x=0}var a=b.prototype;b.WRAP="vehicle_wrap";b.BOUNCE="vehicle_bounce";a.mass=function(a){this._mass=a};a.getMass=function(){return this._mass};a.speed=function(a){this._speed=a};a.getSpeed=function(){return this._speed};a.behavior=function(a){this._behavior=a};a.getBehavior=function(){return this._behavior};
a.position=function(a){this._position=a;this.x=a.x;this.y=a.y};a.getPosition=function(){return this._position};a.velocity=function(a){this._velocity=a};a.getVelocity=function(){return this._velocity};a.setX=function(a){this.x=a;this._position.x=a};a.setY=function(a){this.y=a;this._position.y=a};a.draw=function(a){var b=this.x,e=this.y;a.beginPath();a.moveTo(b+10,e);a.lineTo(b-10,e+5);a.lineTo(b-10,e-5);a.lineTo(b+10,e);a.closePath()};a.update=function(a,d){var e=this._velocity,f=this._position;e.truncate(this._speed);
f.add(e);switch(this._behavior){case b.WRAP:this.wrap(a,d);break;default:this.bounce(a,d)}this.x=f.x;this.y=f.y;this.rotation=e.angle()};a.wrap=function(a,b){var e=this._position;e.x>a&&(e.x=0);0>e.x&&(e.x=a);e.y>b&&(e.y=0);0>e.y&&(e.y=b)};a.bounce=function(a,b){var e=this._velocity,f=this._position;f.x>a?(f.x=a,e.x*=-1):0>f.x&&(f.x=0,e.x*=-1);f.y>b?(f.y=b,e.y*=-1):0>f.y&&(f.y=0,e.y*=-1)};return b}()})(window);
