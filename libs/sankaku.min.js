/*
 inazumatv.com
 @author (at)taikiken / http://inazumatv.com
 @date 2014/06/20 - 11:55

 Copyright (c) 2011-2014 inazumatv.com, inc.

 Distributed under the terms of the MIT license.
 http://www.opensource.org/licenses/mit-license.html

 This notice shall be included in all copies or substantial portions of the Software.

 delaunay
 original: https://github.com/ironwallaby/delaunay

 hosted on
 https://github.com/taikiken/sankaku.js
*/
var Sankaku={version:"0.1.0"};
(function(f){f.console||(f.console={info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){},table:function(){}});Date.now||(Date.now=function(){return(new Date).getTime()});(function(){for(var h=0,b=["ms","moz","webkit","o"],a=0;a<b.length&&!f.requestAnimationFrame;++a)f.requestAnimationFrame=f[b[a]+"RequestAnimationFrame"],f.cancelAnimationFrame=f[b[a]+"CancelAnimationFrame"]||f[b[a]+"CancelRequestAnimationFrame"];void 0===f.requestAnimationFrame&&void 0!==f.setTimeout&&
(f.requestAnimationFrame=function(a){var b=Date.now(),e=Math.max(0,16-(b-h)),g=f.setTimeout(function(){a(b+e)},e);h=b+e;return g});void 0===f.cancelAnimationFrame&&void 0!==f.clearTimeout&&(f.cancelAnimationFrame=function(a){f.clearTimeout(a)});Object.create||(Object.create=function(){function a(){}return function(b){if(1!==arguments.length)throw Error("Object.create implementation only accepts one parameter.");a.prototype=b;return new a}}());Array.isArray||(Array.isArray=function(a){return"[object Array]"===
Object.prototype.toString.call(a)});Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var e;e=b?b:0;var g;if(!this)throw new TypeError;g=this.length;if(0===g||e>=g)return-1;for(0>e&&(e=g-Math.abs(e));e<g;e++)if(this[e]===a)return e;return-1});Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var e,g;e=0;for(g=this.length;e<g;++e)e in this&&a.call(b,this[e],e,this)});Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
var b=Array.prototype.slice.call(arguments,1),e=this,g=function(){},k=function(){return e.apply(this instanceof g&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};g.prototype=this.prototype;k.prototype=new g;return k});String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;window.URL=window.URL||window.webkitURL||window.mozURL||
window.msURL})()})(window.self);(function(f){f.Sankaku.extend=function(h,b){b.prototype=Object.create(h.prototype);b.prototype.constructor=b}})(window);
(function(f){f.Sankaku.Iro=function(){function h(){throw Error("Iro can't create instance");}h.rgb2hsl=function(b,a,d){b/=255;a/=255;d/=255;var c=Math.max(b,a,d),e=Math.min(b,a,d),g,k,r;k=(c+e)/2;if(c===e)g=e=0;else{r=c-e;e=0.5<k?r/(2-c-e):r/(c+e);switch(c){case b:g=(a-d)/r+(a<d?6:0);break;case a:g=(d-b)/r+2;break;case d:g=(b-a)/r+4}g/=6}return{h:g,s:e,l:k}};h.hsl2rgb=function(b,a,d){function c(a,e,b){0>b&&(b+=1);1<b&&(b-=1);return b<1/6?a+6*(e-a)*b:0.5>b?e:b<2/3?a+(e-a)*(2/3-b)*6:a}if(0===a)d=a=
b=d;else{var e=0.5>d?d*(1+a):d+a-d*a,g=2*d-e;d=c(g,e,b+1/3);a=c(g,e,b);b=c(g,e,b-1/3)}return{r:255*d,g:255*a,b:255*b}};h.rgb2hsv=function(b,a,d){b/=255;a/=255;d/=255;var c=Math.max(b,a,d),e=Math.min(b,a,d),g,k=c-e;if(c===e)g=0;else{switch(c){case b:g=(a-d)/k+(a<d?6:0);break;case a:g=(d-b)/k+2;break;case d:g=(b-a)/k+4}g/=6}return{h:g,s:0===c?0:k/c,v:c}};h.hsv2rgb=function(b,a,d){var c,e,g,k=Math.floor(6*b),r=6*b-k;b=d*(1-a);var h=d*(1-r*a);a=d*(1-(1-r)*a);switch(k%6){case 0:c=d;e=a;g=b;break;case 1:c=
h;e=d;g=b;break;case 2:c=b;e=d;g=a;break;case 3:c=b;e=h;g=d;break;case 4:c=a;e=b;g=d;break;case 5:c=d,e=b,g=h}return{r:255*c,g:255*e,b:255*g}};h.hex2rgb=function(b){if("string"!==typeof b)return null;b=b.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,b,c,e){return b+b+c+c+e+e});return(b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b))?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null};h.rgb2hex=function(b,a,d){function c(a){a=a.toString(16);return 1===a.length?"0"+a:a}
return"#"+c(b)+c(a)+c(d)};h.int2hex=function(b){b=Math.floor(b);b=b.toString(16);if(3>b.length)for(var a=3-b.length;a;)b="0"+b,--a;return"#"+b};return h}()})(window);
(function(f){f.Sankaku.List=function(){function h(){throw Error("List can't create instance");}var b=Math.random,a=Math.floor,d=Math.max;h.word=function(a,b){var g=[],d;for(d=0;d<a;d++)g[d]=b;return g};h.zero=function(a){return this.word(a,0)};h.shuffle=function(d){for(var e=[],g=d.length,k;g;)k=a(b()*d.length),k in d&&(e.push(d[k]),delete d[k],--g);return e};h.max=function(a){return d.apply(null,a)};return h}()})(window);
(function(f){f.Sankaku.Num=function(){function h(){throw Error("Num can't create instance");}var b=f.parseFloat,a=Math.random,d=Math.floor;h.is=function(a){return!isNaN(b(a))&&isFinite(a)};h.random=function(b,e){h.is(e)||(e=b,b=0);return b+d(a()*(e-b+1))};return h}()})(window);
(function(f){var h=Math.abs,b=Math.min,a=Math.max,d=Math.round;f.Sankaku.Triangle=function(){function c(e,d,c){this.a=e;this.b=d;this.c=c;var f=d.x-e.x,m=d.y-e.y,l=c.x-e.x,q=c.y-e.y,p=f*(e.x+d.x)+m*(e.y+d.y),t=l*(e.x+c.x)+q*(e.y+c.y),s=2*(f*(c.y-d.y)-m*(c.x-d.x));1E-6>h(s)?(l=b(e.x,d.x,c.x),p=b(e.y,d.y,c.y),f=0.5*(a(e.x,d.x,c.x)-l),e=0.5*(a(e.y,d.y,c.y)-p),this.x=l+f,this.y=p+e):(d=(q*p-m*t)/s,c=(f*t-l*p)/s,f=d-e.x,e=c-e.y,this.x=d,this.y=c);this.r=f*f+e*e}var e=c.prototype;e.draw=function(a){var b=
this.a,e=this.b,d=this.c;a.beginPath();a.moveTo(b.x,b.y);a.lineTo(e.x,e.y);a.lineTo(d.x,d.y);a.closePath()};e.centroid=function(){return{x:d((this.a.x+this.b.x+this.c.x)/3),y:d((this.a.y+this.b.y+this.c.y)/3)}};return c}()})(window);
(function(f){f=f.Sankaku;var h=f.Triangle;f.Delaunay=function(){function b(){throw Error("Sankaku can't create instance.");}b.triangulate=function(a){if(3>a.length)return[];var b,c,e,g,k,f,n,m,l,q=function(a){var b=a.length,e,d,c,g,k;a:for(;b;)for(d=a[--b],e=a[--b],c=b;c;)if(k=a[--c],g=a[--c],e===g&&d===k||e===k&&d===g){a.splice(b,2);a.splice(c,2);b-=2;continue a}};a.sort(function(a,b){return b.x-a.x});c=a.length-1;b=a[c];e=b.x;g=a[0].x;for(f=k=b.y;c--;)b.y<k&&(k=b.y),b.y>f&&(f=b.y);n=g-e;m=f-k;c=
n>m?n:m;b=0.5*(g+e);n=0.5*(f+k);f=[new h({x:b-20*c,y:n-c,__sentinel:!0},{x:b,y:n+20*c,__sentinel:!0},{x:b+20*c,y:n-c,__sentinel:!0})];k=[];e=[];for(c=a.length;c--;){e.length=0;g=f.length;for(b=a[c];g--;)l=f[g],n=b.x-l.x,0<n&&n*n>l.r?(k.push(l),f.splice(g,1)):(m=b.y-l.y,n*n+m*m>l.r||(e.push(l.a,l.b,l.b,l.c,l.c,l.a),f.splice(g,1)));q(e);for(g=e.length;g;)m=e[--g],n=e[--g],f.push(new h(n,m,b))}Array.prototype.push.apply(k,f);for(c=k.length;c--;)a=k[c],(a.a.__sentinel||a.b.__sentinel||a.c.__sentinel)&&
k.splice(c,1);return k};return b}()})(window);
(function(f){f.Sankaku.Vector2D=function(){function f(a,b){this.x=a||0;this.y=b||0}var b=f.prototype;b.draw=function(a){a.beginPath();a.moveTo(0,0);a.lineTo(this.x,this.y);a.closePath();return this};b.clone=function(){return new f(this.x,this.y)};b.zero=function(){this.y=this.x=0;return this};b.isZero=function(){return 0===this.x&&0===this.y};b.set=function(a,b){this.x=a;this.y=b;return this};b.setX=function(a){this.x=a;return this};b.setY=function(a){this.y=a;return this};b.copy=function(a){this.x=
a.x;this.y=a.y;return this};b.add=function(a){this.x+=a.x;this.y+=a.y;return this};b.addScalar=function(a){this.x+=a;this.y+=a;return this};b.addNew=function(a){return new f(this.x+a.x,this.y+a.y)};b.addVector=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this};b.sub=function(a){this.x-=a.x;this.y-=a.y;return this};b.subNew=function(a){return new f(this.x-a.x,this.y-a.y)};b.subVector=function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this};b.multiply=function(a){this.x*=a.x;this.y*=a.y;return this};
b.multiplyScalar=function(a){this.x*=a;this.y*=a;return this};b.multiplyNew=function(a){return new f(this.x*a.x,this.y*a.y)};b.divide=function(a){this.x/=a.x;this.y/=a.y;return this};b.divideScalar=function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this};b.divideNew=function(a){return new f(this.x/a.x,this.y/a.y)};b.min=function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this};b.max=function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this};b.clamp=
function(a,b){this.min(a);this.max(b);return this};b.clampScalar=function(a,b){var c,e;c=new f;e=new f;c.set(a,a);e.set(b,b);return this.clamp(c,e)};b.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};b.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};b.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};b.roundToZero=function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):
Math.floor(this.y);return this};b.negate=function(){return this.multiplyScalar(-1)};b.dot=function(a){return this.x*a.x+this.y*a.y};b.lengthSq=function(){return this.x*this.x+this.y*this.y};b.length=function(){return Math.sqrt(this.lengthSq())};b.setLength=function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this};b.setAngle=function(a){this.length();this.x=Math.cos(a);this.y=Math.sin(a);return this};b.angle=function(){return Math.atan2(this.y,this.x)};b.normalize=function(){return this.divideScalar(this.length())};
b.distanceSq=function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a};b.distance=function(a){return Math.sqrt(this.distanceSq(a))};b.lerp=function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this};b.equals=function(a){return a.x===this.x&&a.y===this.y};b.fomArray=function(a){this.x=a[0];this.y=a[1];return this};b.toArray=function(){return[this.x,this.y]};b.truncate=function(a){a=Math.min(a,this.length());return this.setLength(a)};b.reverse=function(){this.x*=-1;this.y*=-1;return this};
b.isNormalize=function(){return 1===this.length()};b.prev=function(){return new f(-this.y,this.x)};b.sign=function(a){return 0>this.prev().dot(a)?-1:1};f.angleBetween=function(a,b){a.isNormalize()||(a=a.clone().normalize());b.isNormalize()||(b=b.clone().normalize());return Math.acos(a.dot(b))};return f}()})(window);
(function(f){f=f.Sankaku;var h=f.Vector2D,b=Math.cos,a=Math.sin;f.Vehicle=function(){function d(){this._position=new h;this._velocity=new h;this._mass=1;this._speed=10;this._behavior=d.BOUNCE;this.rotation=this.y=this.x=0;this.width=20;this.height=10}d.WRAP="vehicle_wrap";d.BOUNCE="vehicle_bounce";var c=d.prototype;c.mass=function(a){this._mass=a};c.getMass=function(){return this._mass};c.speed=function(a){this._speed=a};c.getSpeed=function(){return this._speed};c.behavior=function(a){this._behavior=
a};c.getBehavior=function(){return this._behavior};c.position=function(a){this._position=a;this.x=a.x;this.y=a.y};c.getPosition=function(){return this._position};c.velocity=function(a){this._velocity=a};c.getVelocity=function(){return this._velocity};c.setX=function(a){this.x=a;this._position.x=a};c.setY=function(a){this.y=a;this._position.y=a};c.bounding=function(){var e=this.x,c=this.y,d=0.5*this.width,f=0.5*this.height,h=this.rotation,m,l,q,p,t,s;q=a(h);p=b(h);m=-d;l=-f;h=p*m;t=p*l;l*=q;m*=q;s=
p*d;p*=f;d*=q;f*=q;return{a:{x:h-l+e,y:t+m+c},b:{x:s-l+e,y:t+d+c},c:{x:s-f+e,y:p+d+c},d:{x:h-f+e,y:p+m+c}}};c.draw=function(a){var b=this.bounding(),c,d,f;c=b.a;d=b.b;f=b.c;b=b.d;a.beginPath();a.moveTo(c.x,c.y);a.lineTo(d.x,d.y+0.5*(f.y-d.y));a.lineTo(b.x,b.y);a.lineTo(c.x,c.y);a.closePath()};c.update=function(a,b){this._update(a,b)};c._update=function(a,b){var c=this._velocity,f=this._position;c.truncate(this._speed);f.add(c);switch(this._behavior){case d.WRAP:this.wrap(a,b);break;default:this.bounce(a,
b)}this.x=f.x;this.y=f.y;this.rotation=c.angle()};c.wrap=function(a,b){var c=this._position;c.x>a&&(c.x=0);0>c.x&&(c.x=a);c.y>b&&(c.y=0);0>c.y&&(c.y=b)};c.bounce=function(a,b){var c=this._velocity,d=this._position;d.x>a?(d.x=a,c.x*=-1):0>d.x&&(d.x=0,c.x*=-1);d.y>b?(d.y=b,c.y*=-1):0>d.y&&(d.y=0,c.y*=-1)};return d}()})(window);
(function(f){var h=f.Sankaku,b=h.Vehicle,a=h.Vector2D;h.SteeredVehicle=function(){function d(){b.call(this);this._force=new a;this._max=1}h.extend(b,d);var c=d.prototype;c.getMax=function(){return this._max};c.max=function(a){this._max=a};c.update=function(a,b){var c=this._force,d=this._velocity;c.truncate(this._max).divideScalar(this.getMass());d.add(c);this._update(a,b)};c.seek=function(b){b=b.subNew(this._position);b.normalize().multiplyScalar(this._speed);b=b.subNew(this._velocity);this._force=
new a;this._force.add(b)};c.flee=function(b){b=b.subNew(this._position);b.normalize().multiplyScalar(this._speed);b=b.subNew(this._velocity);this._force=new a;this._force.sub(b)};return d}()})(window);
